<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Araponga API • Developer Portal</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header class="hero">
    <div class="container">
      <p class="eyebrow">Araponga API • Developer Portal</p>
      <h1>Araponga API — Territory-first, community-first.</h1>
      <p class="lead">
        Araponga é uma plataforma comunitária orientada a <strong>territory</strong>: um recorte vivo do mundo real,
        onde pessoas, memórias, cuidado e responsabilidade ganham forma digital sem virar mercadoria.
        Este portal apresenta a visão do produto, seus domínios e fluxos, e como contribuir com uma API
        construída com <em>privacidade por design</em>, governança local e compromisso explícito com o não-extrativismo.
      </p>

      <div class="hero-actions">
        <a class="button" href="/swagger">Abrir Swagger</a>
        <a class="button secondary" href="/health">Checar health</a>
        <a class="button ghost" href="https://github.com/sraphaz/araponga">GitHub</a>
      </div>

      <div class="meta">
        <strong>Swagger:</strong> normalmente habilitado em ambiente <code>Development</code>. Se estiver desativado,
        execute com <code>ASPNETCORE_ENVIRONMENT=Development</code>. Em ambientes produtivos, recomenda-se controlar o
        acesso à documentação e à exploração interativa por segurança e governança.
      </div>

      <div class="meta">
        <strong>Nota prática:</strong> a antiga página inicial tinha o botão “Carregar dados”.
        A partir daqui, a exploração do territory acontece via API: use os exemplos e fluxos abaixo para testar,
        validar contratos e orientar as próximas iterações.
      </div>
    </div>
  </header>

  <main class="container">
    <section class="toc" id="toc">
      <h2>Sumário</h2>
      <div class="toc-grid">
        <a href="#product-brief">Product brief</a>
        <a href="#domains">Domínios</a>
        <a href="#flows">Fluxos principais</a>
        <a href="#quickstart">Quickstart</a>
        <a href="#examples">Exemplos de API</a>
        <a href="#principles">Princípios e governança</a>
        <a href="#links">Links úteis</a>
      </div>
    </section>

    <section id="product-brief" class="section">
      <div class="section-header">
        <h2>Product brief</h2>
        <p>
          O Araponga é um serviço para comunidades que querem <strong>visibilidade local</strong> sem abrir mão de
          <strong>autonomia</strong>. Tudo começa pelo <strong>territory</strong>: um recorte geográfico real que
          organiza a experiência, define contexto e reduz ruído. A partir dele, emergem duas camadas humanas essenciais:
          <strong>visitor</strong> (visitante) e <strong>resident</strong> (morador). Esses papéis não são “detalhes
          de autorização”; eles são o mecanismo que sustenta convivência digital com respeito ao território e às pessoas.
        </p>
        <p>
          Em vez de um feed global que captura atenção, o Araponga estabelece um feed e um mapa que respondem ao
          território e ao vínculo. Isso permite priorizar o que é relevante, proteger conteúdo sensível, e cultivar
          memória territorial — incluindo, no futuro, mídias ancoradas em coordenadas capazes de compor camadas mais
          ricas e até experiências espaciais (incluindo 3D) quando fizer sentido.
        </p>
      </div>

      <div class="callout">
        <strong>Foco técnico:</strong> arquitetura orientada a domínios, contratos simples e auditáveis,
        governança em camadas e evolução incremental (MVP → camadas avançadas → experiências espaciais ancoradas em territory).
        O objetivo é construir um núcleo sólido antes de acelerar funcionalidades.
      </div>
    </section>

    <section id="domains" class="section">
      <div class="section-header">
        <h2>Domínios</h2>
        <p>
          Os domínios existem para manter responsabilidades claras e evitar que regras sociais se misturem com
          representações do território. A intenção é proteger a integridade do sistema: território como referência,
          pessoas como vínculo, conteúdo como expressão, e governança como camada explícita.
          Abaixo estão os elementos essenciais no estágio atual.
        </p>
      </div>

      <div class="card-grid">
        <article class="card">
          <h3>Territory</h3>
          <p><strong>O que é:</strong> recorte geográfico neutro — a referência organizadora do Araponga.</p>
          <p>
            <strong>Por que existe:</strong> separa “onde” (território) de “quem” (pessoas e vínculos) e de “o quê”
            (conteúdo e camadas). Isso permite evoluir sem distorcer o conceito base.
          </p>
          <ul>
            <li><strong>Campos:</strong> id, name, slug, bounds, createdAt.</li>
            <li><strong>Endpoints:</strong> <code>GET /api/v1/territories</code>, <code>GET /api/v1/territories/{id}</code>.</li>
          </ul>
        </article>

        <article class="card">
          <h3>User</h3>
          <p><strong>O que é:</strong> identidade autenticada para agir no sistema.</p>
          <p>
            <strong>Por que existe:</strong> responsabiliza ações sem depender de exposição de dados sensíveis.
            A regra é: coletar o mínimo necessário, manter rastreabilidade do que importa e proteger o que não precisa existir.
          </p>
          <ul>
            <li><strong>Campos:</strong> id, displayName, email, status.</li>
            <li><strong>Endpoints:</strong> <code>POST /api/v1/auth/login</code>, <code>POST /api/v1/auth/register</code>.</li>
          </ul>
        </article>

        <article class="card">
          <h3>Membership</h3>
          <p><strong>O que é:</strong> vínculo entre pessoa e territory (visitor ou resident).</p>
          <p>
            <strong>Por que existe:</strong> governa visibilidade, acesso e prioridades locais.
            Esse domínio é o “coração operacional” das regras: sem ele, o território vira um filtro genérico;
            com ele, o território vira contexto de convivência.
          </p>
          <ul>
            <li><strong>Campos:</strong> id, userId, territoryId, role, status.</li>
            <li><strong>Endpoints:</strong> <code>GET /api/v1/territories/{territoryId}/membership</code>.</li>
          </ul>
        </article>

        <article class="card">
          <h3>Feed</h3>
          <p><strong>O que é:</strong> posts, alertas e eventos vinculados ao territory.</p>
          <p>
            <strong>Por que existe:</strong> distribui informação relevante com regras de visibilidade.
            O feed é “o que está vivo” no território: relatos, avisos, convites, e memória em tempo.
          </p>
          <ul>
            <li><strong>Campos:</strong> id, title, content, type, visibility, createdAtUtc.</li>
            <li><strong>Endpoints:</strong> <code>GET /api/v1/feed</code>, <code>POST /api/v1/feed</code>.</li>
          </ul>
        </article>

        <article class="card">
          <h3>Map</h3>
          <p><strong>O que é:</strong> entidades e camadas georreferenciadas do territory.</p>
          <p>
            <strong>Por que existe:</strong> transforma informação em referência espacial.
            O mapa não é “mais uma tela”: é o mecanismo que permite situar o que é importante
            sem depender de ruído global e sem padronizar o território como produto.
          </p>
          <ul>
            <li><strong>Campos:</strong> id, name, category, status, visibility, createdAtUtc.</li>
            <li><strong>Endpoints:</strong> <code>GET /api/v1/map/entities</code>, <code>POST /api/v1/map/entities</code>.</li>
          </ul>
        </article>

        <article class="card">
          <h3>Media + GeoAnchor</h3>
          <p><strong>O que é:</strong> mídia (foto/áudio/vídeo) ancorada em latitude/longitude (e, quando útil, altitude).</p>
          <p>
            <strong>Por que existe:</strong> constrói memória territorial com precisão — e com controle.
            GeoAnchor cria base para camadas futuras: visualização contextual, trilhas, registros de cuidado,
            e eventualmente representações espaciais mais complexas (inclusive 3D) geradas a partir de dados e mídias do app.
          </p>
          <ul>
            <li><strong>Campos:</strong> mediaId, territoryId, lat, lon, altitude, visibility.</li>
            <li><strong>Endpoints:</strong> planejados (<em>upcoming</em>).</li>
          </ul>
        </article>
      </div>
    </section>

    <section id="flows" class="section">
      <div class="section-header">
        <h2>Fluxos principais</h2>
        <p>
          Dois fluxos definem a experiência inicial. Ambos são orientados por territory e sustentados por membership.
          O objetivo não é apenas “funcionar”: é funcionar com coerência social e espacial.
        </p>
      </div>

      <div class="flow-grid">
        <div class="flow">
          <h3>Fluxo 1 — Onboarding</h3>
          <ol>
            <li><strong>Login</strong> ou criação de conta.</li>
            <li><strong>Escolha de territory</strong> (ou definição via contexto local, quando aplicável).</li>
            <li><strong>Declaração de vínculo</strong>: visitor ou resident.</li>
            <li><strong>Resolução de visibilidade</strong>: feed e mapa respondem ao papel e ao territory ativo.</li>
          </ol>
          <p class="note">
            Resultado: o usuário entra em um território como contexto real — e não em um feed genérico.
            A plataforma passa a operar com regras explícitas de convivência e acesso.
          </p>
        </div>

        <div class="flow">
          <h3>Fluxo 2 — Post georreferenciado</h3>
          <ol>
            <li><strong>Criar post</strong> no feed do territory.</li>
            <li><strong>Anexar mídia</strong> com geoAnchor (lat/lon/alt) quando for relevante.</li>
            <li><strong>Definir visibilidade</strong> (público, restrito, residents).</li>
            <li><strong>Distribuição coerente</strong>: conteúdo aparece no feed e, quando aplicável, no mapa local.</li>
          </ol>
          <p class="note">
            Este fluxo está em construção; a etapa de mídia/geoAnchor é futura.
            A implementação deve priorizar: privacidade, controle de visibilidade e consistência dos contratos.
          </p>
        </div>
      </div>
    </section>

    <section id="quickstart" class="section">
      <div class="section-header">
        <h2>Quickstart</h2>
        <p>
          Comece localmente ou via Docker. Estes comandos são copy/paste.
          Dica: valide primeiro <code>/health</code>, depois abra o Swagger, e só então teste os fluxos.
        </p>
      </div>

      <div class="code-grid">
        <div>
          <h3>Local (dotnet)</h3>
          <pre><code>git clone https://github.com/sraphaz/araponga.git
cd araponga

dotnet restore

dotnet run --project backend/Araponga.Api
</code></pre>
          <p class="note">
            Abra <code>http://localhost:8080/</code> (portal) e <code>/swagger</code> (documentação). A porta pode variar conforme a configuração.
          </p>
        </div>

        <div>
          <h3>Docker</h3>
          <pre><code>docker build -t araponga-api .

docker run --rm -p 8080:8080 \
  -e ASPNETCORE_URLS=http://0.0.0.0:8080 \
  -e ASPNETCORE_ENVIRONMENT=Development \
  araponga-api
</code></pre>
          <p class="note">
            Use <code>ASPNETCORE_ENVIRONMENT=Development</code> para habilitar o Swagger localmente.
            Em produção, avalie expor Swagger apenas em redes internas ou com autenticação.
          </p>
        </div>
      </div>
    </section>

    <section id="examples" class="section">
      <div class="section-header">
        <h2>Exemplos de API</h2>
        <p>
          Use um <code>territoryId</code> real retornado pelo endpoint de territories.
          O princípio é simples: primeiro descubra o territory, depois explore feed e mapa com visibilidade coerente.
        </p>
      </div>

      <div class="code-grid">
        <div>
          <h3>Listar territories</h3>
          <pre><code>curl -s http://localhost:8080/api/v1/territories | jq
</code></pre>
        </div>

        <div>
          <h3>Listar feed do territory</h3>
          <pre><code>curl -s "http://localhost:8080/api/v1/feed?territoryId=SEU_TERRITORY_ID" | jq
</code></pre>
          <p class="note">
            Se houver regras de visibilidade aplicadas por membership, teste com perfis visitor e resident para validar o comportamento.
          </p>
        </div>

        <div>
          <h3>Listar mapa do territory</h3>
          <pre><code>curl -s "http://localhost:8080/api/v1/map/entities?territoryId=SEU_TERRITORY_ID" | jq
</code></pre>
        </div>

        <div>
          <h3>Listar mídia do territory (planned)</h3>
          <pre><code># upcoming endpoint
curl -s "http://localhost:8080/api/v1/media?territoryId=SEU_TERRITORY_ID" | jq
</code></pre>
          <p class="note">
            A camada de mídia/geoAnchor deve nascer com controle de visibilidade e intenção explícita: memória territorial, não vigilância.
          </p>
        </div>

        <div>
          <h3>Postar mídia georreferenciada (planned)</h3>
          <pre><code>curl -X POST "http://localhost:8080/api/v1/media" \
  -H "Authorization: Bearer SEU_TOKEN" \
  -F "territoryId=SEU_TERRITORY_ID" \
  -F "lat=-23.5505" \
  -F "lon=-46.6333" \
  -F "visibility=RESIDENT" \
  -F "file=@/caminho/arquivo.jpg"
</code></pre>
          <p class="note">
            Planejado para próximas iterações. Prioridade: contratos claros, validações fortes (lat/lon/alt), e proteção de conteúdo sensível.
          </p>
        </div>
      </div>
    </section>

    <section id="principles" class="section">
      <div class="section-header">
        <h2>Princípios e governança</h2>
        <p>
          O Araponga não é neutro no sentido moral: ele nasce para fortalecer autonomia local e evitar padrões
          de exploração de dados. Estes princípios orientam decisões técnicas e de produto.
        </p>
      </div>

      <ul class="principles">
        <li><strong>Territory como referência:</strong> o espaço físico orienta a experiência, o contexto e a responsabilidade.</li>
        <li><strong>Privacidade por design:</strong> acesso mínimo, visibilidade controlada, e cuidado com dados de localização.</li>
        <li><strong>Anti-extrativismo:</strong> dados não são mercadoria; a plataforma não existe para captura de atenção.</li>
        <li><strong>Governança comunitária:</strong> decisões locais e regras explícitas; moderação e critérios evolutivos.</li>
        <li><strong>Evolutivo:</strong> MVP sólido → camadas avançadas → experiências espaciais (inclusive 3D) quando houver maturidade.</li>
      </ul>

      <p>
        Quer contribuir? Veja
        <a href="https://github.com/sraphaz/araponga/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a>
        ou abra uma issue no GitHub com contexto, motivação e critérios de validação.
      </p>
    </section>

    <section id="links" class="section">
      <div class="section-header">
        <h2>Links úteis</h2>
        <p>Atalhos para documentação, status, contribuição e licenças.</p>
      </div>

      <div class="link-grid">
        <a href="/swagger">Swagger</a>
        <a href="/health">Health</a>
        <a href="https://github.com/sraphaz/araponga">GitHub</a>
        <a href="https://github.com/sraphaz/araponga/blob/main/LICENSE">LICENSE</a>
        <a href="https://github.com/sraphaz/araponga/blob/main/LICENSE.pt-BR">LICENSE.pt-BR</a>
        <a href="https://github.com/sraphaz/araponga/blob/main/CONTRIBUTING.md">CONTRIBUTING</a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>
        Araponga é um projeto comunitário focado em territory, cuidado e autonomia.
        Se você sente ressonância com essa direção, contribua com uma issue, um PR pequeno e verificável,
        ou com validação de fluxos no território.
      </p>
    </div>
  </footer>
</body>
</html>
